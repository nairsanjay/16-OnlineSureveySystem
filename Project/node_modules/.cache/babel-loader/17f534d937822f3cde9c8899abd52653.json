{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sanja\\\\Desktop\\\\google-forms-master\\\\src\\\\Components\\\\Responding\\\\UserView.js\";\nimport React from 'react';\nimport { Grid } from '@material-ui/core';\nimport { Paper, Typography } from '@material-ui/core';\nimport formService from '../../services/formService';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Radio from '@material-ui/core/Radio';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport Divider from '@material-ui/core/Divider';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport auth from '../../services/authService';\nconst useStyles = makeStyles(theme => ({}));\n\nfunction UserView(props) {\n  const classes = useStyles();\n  const [userId, setUserId] = React.useState(\"\");\n  const [formData, setFormData] = React.useState({});\n  const [responseData, setResponseData] = React.useState([]); //console.log(responseData);\n\n  const [optionValue, setOptionValue] = React.useState([]);\n  const [isSubmitted, setIsSubmitted] = React.useState(false);\n  const [questions, setQuestions] = React.useState([]);\n  const [value, setValue] = React.useState(''); //console.log(value);\n\n  React.useEffect(() => {\n    if (auth.isAuthenticated()) {\n      var userr = auth.getCurrentUser();\n      console.log(userr.id);\n      setUserId(userr.id);\n    } else {\n      var anonymousUserId = \"anonymous\" + Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);\n      console.log(anonymousUserId);\n      setUserId(anonymousUserId);\n    }\n  }, []);\n\n  const handleRadioChange = (j, i) => {\n    var questionId = questions[i]._id;\n    var optionId = questions[i].options[j]._id;\n    var fakeData = {\n      question: i,\n      option: j\n    };\n    var data = {\n      questionId,\n      optionId\n    }; //  console.log(data);\n    //console.log(fakeData);\n    // console.log(j);\n\n    setValue(j);\n    var fakeRData = [...responseData];\n    var indexOfResponse = fakeRData.findIndex(x => x.questionId === questionId);\n\n    if (indexOfResponse === -1) {\n      setResponseData(responseData => [...responseData, data]);\n    } else {\n      fakeRData[indexOfResponse].questionId = questionId;\n      setResponseData(fakeRData);\n    } // setOptionValue(fakeData);\n    //  \n\n  };\n\n  React.useEffect(() => {\n    var formId = props.match.params.formId;\n    console.log(formId);\n    formService.getForm(formId).then(data => {\n      console.log(data);\n      setFormData(data);\n      setQuestions(data.questions);\n    }, error => {\n      const resMessage = error.response && error.response.data && error.response.data.message || error.message || error.toString();\n      console.log(resMessage);\n    });\n  }, [props.match.params.formId]);\n\n  function submitResponse() {\n    var submissionData = {\n      formId: formData._id,\n      userId: userId,\n      response: responseData\n    };\n    console.log(submissionData);\n    formService.submitResponse(submissionData).then(data2 => {\n      setIsSubmitted(true);\n      console.log(data2);\n    }, error => {\n      const resMessage = error.response && error.response.data && error.response.data.message || error.message || error.toString();\n      console.log(resMessage);\n    });\n  }\n\n  function reloadForAnotherResponse() {\n    window.location.reload(true);\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      minHeight: '100vh'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(AppBar, {\n    position: \"static\",\n    style: {\n      backgroundColor: 'teal'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(Toolbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    edge: \"start\",\n    style: {\n      marginRight: '10px',\n      marginBottom: '5px'\n    },\n    color: \"inherit\",\n    \"aria-label\": \"menu\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(MenuIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h6\",\n    style: {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 15\n    }\n  }, \"Velocity Forms\"))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    direction: \"column\",\n    justify: \"center\",\n    alignItems: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 5,\n    style: {\n      width: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    style: {\n      borderTop: '10px solid teal',\n      borderRadius: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(Paper, {\n    elevation: 2,\n    style: {\n      width: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'flex-start',\n      marginLeft: '15px',\n      paddingTop: '20px',\n      paddingBottom: '20px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h4\",\n    style: {\n      fontFamily: 'sans-serif Roboto',\n      marginBottom: \"15px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 33\n    }\n  }, formData.name), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"subtitle1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 33\n    }\n  }, formData.description)))))), !isSubmitted ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 20\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 20\n    }\n  }, questions.map((ques, i) => /*#__PURE__*/React.createElement(\"div\", {\n    key: i,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 27\n    }\n  }), /*#__PURE__*/React.createElement(Paper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'flex-start',\n      marginLeft: '6px',\n      paddingTop: '15px',\n      paddingBottom: '15px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"subtitle1\",\n    style: {\n      marginLeft: '10px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 33\n    }\n  }, i + 1, \". \", ques.questionText), ques.questionImage !== \"\" ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: ques.questionImage,\n    width: \"80%\",\n    height: \"auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 39\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 97\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 106\n    }\n  })) : \"\", /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 35\n    }\n  }, /*#__PURE__*/React.createElement(RadioGroup, {\n    \"aria-label\": \"quiz\",\n    name: \"quiz\",\n    value: value,\n    onChange: e => {\n      handleRadioChange(e.target.value, i);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 35\n    }\n  }, ques.options.map((op, j) => /*#__PURE__*/React.createElement(\"div\", {\n    key: j,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 39\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      marginLeft: '7px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(FormControlLabel, {\n    value: j,\n    control: /*#__PURE__*/React.createElement(Radio, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 82\n      }\n    }),\n    label: op.optionText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 44\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      marginLeft: '10px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 41\n    }\n  }, op.optionImage !== \"\" ? /*#__PURE__*/React.createElement(\"img\", {\n    src: op.optionImage,\n    width: \"64%\",\n    height: \"auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 47\n    }\n  }) : \"\", /*#__PURE__*/React.createElement(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 43\n    }\n  })))))))))))), /*#__PURE__*/React.createElement(Grid, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: submitResponse,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 23\n    }\n  }, \"Submit\")), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 21\n    }\n  }))) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 20\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 22\n    }\n  }, \"Form submitted\"), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 22\n    }\n  }, \"Thanks for submiting form\"), /*#__PURE__*/React.createElement(Button, {\n    onClick: reloadForAnotherResponse,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 22\n    }\n  }, \"Submit another response\"))))));\n}\n\nexport default UserView;\n\nconst FormControlLabelWrapper = props => {\n  const {\n    radioButton,\n    ...labelProps\n  } = props;\n  return /*#__PURE__*/React.createElement(FormControlLabel, Object.assign({\n    control: /*#__PURE__*/React.createElement(Radio, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 16\n      }\n    }),\n    label: \"Radio \" + props.value + props.jIndex\n  }, labelProps, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 5\n    }\n  }));\n};","map":{"version":3,"sources":["C:/Users/sanja/Desktop/google-forms-master/src/Components/Responding/UserView.js"],"names":["React","Grid","Paper","Typography","formService","CircularProgress","FormControlLabel","Radio","AppBar","Toolbar","Button","IconButton","MenuIcon","RadioGroup","Divider","makeStyles","Container","auth","useStyles","theme","UserView","props","classes","userId","setUserId","useState","formData","setFormData","responseData","setResponseData","optionValue","setOptionValue","isSubmitted","setIsSubmitted","questions","setQuestions","value","setValue","useEffect","isAuthenticated","userr","getCurrentUser","console","log","id","anonymousUserId","Math","random","toString","substring","handleRadioChange","j","i","questionId","_id","optionId","options","fakeData","question","option","data","fakeRData","indexOfResponse","findIndex","x","formId","match","params","getForm","then","error","resMessage","response","message","submitResponse","submissionData","data2","reloadForAnotherResponse","window","location","reload","minHeight","backgroundColor","marginRight","marginBottom","width","borderTop","borderRadius","display","flexDirection","alignItems","marginLeft","paddingTop","paddingBottom","fontFamily","name","description","map","ques","questionText","questionImage","e","target","op","optionText","optionImage","FormControlLabelWrapper","radioButton","labelProps","jIndex"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,SAAQC,IAAR,QAAmB,mBAAnB;AAEA,SAASC,KAAT,EAAgBC,UAAhB,QAAkC,mBAAlC;AAEA,OAAOC,WAAP,MAAwB,4BAAxB;AACA,OAAOC,gBAAP,MAA6B,oCAA7B;AACA,OAAOC,gBAAP,MAA6B,oCAA7B;AACA,OAAOC,KAAP,MAAkB,yBAAlB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,OAAP,MAAoB,2BAApB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,QAAP,MAAqB,yBAArB;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,OAAP,MAAoB,2BAApB;AACA,SAASC,UAAT,QAA2B,0BAA3B;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AAEA,OAAOC,IAAP,MAAiB,4BAAjB;AAEA,MAAMC,SAAS,GAAGH,UAAU,CAAEI,KAAD,KAAY,EAAZ,CAAD,CAA5B;;AAMA,SAASC,QAAT,CAAkBC,KAAlB,EAAyB;AACvB,QAAMC,OAAO,GAAGJ,SAAS,EAAzB;AAEE,QAAM,CAACK,MAAD,EAASC,SAAT,IAAsBxB,KAAK,CAACyB,QAAN,CAAe,EAAf,CAA5B;AACA,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0B3B,KAAK,CAACyB,QAAN,CAAe,EAAf,CAAhC;AACA,QAAM,CAACG,YAAD,EAAeC,eAAf,IAAkC7B,KAAK,CAACyB,QAAN,CAAe,EAAf,CAAxC,CALqB,CAMrB;;AAEA,QAAM,CAACK,WAAD,EAAcC,cAAd,IAAgC/B,KAAK,CAACyB,QAAN,CAAe,EAAf,CAAtC;AACA,QAAM,CAACO,WAAD,EAAcC,cAAd,IAAgCjC,KAAK,CAACyB,QAAN,CAAe,KAAf,CAAtC;AAGA,QAAM,CAACS,SAAD,EAAYC,YAAZ,IAA4BnC,KAAK,CAACyB,QAAN,CAAe,EAAf,CAAlC;AACA,QAAM,CAACW,KAAD,EAAQC,QAAR,IAAoBrC,KAAK,CAACyB,QAAN,CAAe,EAAf,CAA1B,CAbqB,CAcrB;;AACAzB,EAAAA,KAAK,CAACsC,SAAN,CAAgB,MAAI;AAClB,QAAGrB,IAAI,CAACsB,eAAL,EAAH,EAA0B;AACxB,UAAIC,KAAK,GAAGvB,IAAI,CAACwB,cAAL,EAAZ;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYH,KAAK,CAACI,EAAlB;AACApB,MAAAA,SAAS,CAACgB,KAAK,CAACI,EAAP,CAAT;AACD,KAJD,MAIM;AACJ,UAAIC,eAAe,GAAG,cAAeC,IAAI,CAACC,MAAL,GAAcC,QAAd,CAAuB,EAAvB,EAA2BC,SAA3B,CAAqC,CAArC,EAAwC,EAAxC,CAAf,GAA6DH,IAAI,CAACC,MAAL,GAAcC,QAAd,CAAuB,EAAvB,EAA2BC,SAA3B,CAAqC,CAArC,EAAwC,EAAxC,CAAnF;AACAP,MAAAA,OAAO,CAACC,GAAR,CAAYE,eAAZ;AACArB,MAAAA,SAAS,CAACqB,eAAD,CAAT;AACD;AACF,GAVD,EAUG,EAVH;;AAcA,QAAMK,iBAAiB,GAAG,CAACC,CAAD,EAAIC,CAAJ,KAAU;AAClC,QAAIC,UAAU,GAAGnB,SAAS,CAACkB,CAAD,CAAT,CAAaE,GAA9B;AACA,QAAIC,QAAQ,GAAGrB,SAAS,CAACkB,CAAD,CAAT,CAAaI,OAAb,CAAqBL,CAArB,EAAwBG,GAAvC;AAEA,QAAIG,QAAQ,GAAG;AACbC,MAAAA,QAAQ,EAAEN,CADG;AAEbO,MAAAA,MAAM,EAAER;AAFK,KAAf;AAIA,QAAIS,IAAI,GAAG;AACTP,MAAAA,UADS;AACGE,MAAAA;AADH,KAAX,CARkC,CAWpC;AACE;AACD;;AAEClB,IAAAA,QAAQ,CAACc,CAAD,CAAR;AAEA,QAAIU,SAAS,GAAG,CAAC,GAAGjC,YAAJ,CAAhB;AAEA,QAAIkC,eAAe,GAAGD,SAAS,CAACE,SAAV,CAAoBC,CAAC,IAAIA,CAAC,CAACX,UAAF,KAAeA,UAAxC,CAAtB;;AACE,QAAGS,eAAe,KAAK,CAAC,CAAxB,EAA0B;AAC1BjC,MAAAA,eAAe,CAACD,YAAY,IAAG,CAAC,GAAGA,YAAJ,EAAkBgC,IAAlB,CAAhB,CAAf;AAEC,KAHD,MAGM;AACJC,MAAAA,SAAS,CAACC,eAAD,CAAT,CAA2BT,UAA3B,GAAwCA,UAAxC;AACAxB,MAAAA,eAAe,CAACgC,SAAD,CAAf;AACD,KA1B+B,CA6BnC;AACD;;AACC,GA/BD;;AAiCA7D,EAAAA,KAAK,CAACsC,SAAN,CAAgB,MAAM;AAClB,QAAI2B,MAAM,GAAG5C,KAAK,CAAC6C,KAAN,CAAYC,MAAZ,CAAmBF,MAAhC;AACAvB,IAAAA,OAAO,CAACC,GAAR,CAAYsB,MAAZ;AAEA7D,IAAAA,WAAW,CAACgE,OAAZ,CAAoBH,MAApB,EACCI,IADD,CACOT,IAAD,IAAU;AACZlB,MAAAA,OAAO,CAACC,GAAR,CAAYiB,IAAZ;AAEAjC,MAAAA,WAAW,CAACiC,IAAD,CAAX;AACAzB,MAAAA,YAAY,CAACyB,IAAI,CAAC1B,SAAN,CAAZ;AACA,KANJ,EAOGoC,KAAK,IAAI;AACT,YAAMC,UAAU,GACXD,KAAK,CAACE,QAAN,IACDF,KAAK,CAACE,QAAN,CAAeZ,IADd,IAEDU,KAAK,CAACE,QAAN,CAAeZ,IAAf,CAAoBa,OAFpB,IAGAH,KAAK,CAACG,OAHN,IAIAH,KAAK,CAACtB,QAAN,EALJ;AAMIN,MAAAA,OAAO,CAACC,GAAR,CAAY4B,UAAZ;AACH,KAfJ;AAkBH,GAtBD,EAsBE,CAAClD,KAAK,CAAC6C,KAAN,CAAYC,MAAZ,CAAmBF,MAApB,CAtBF;;AAwBA,WAASS,cAAT,GAAyB;AACvB,QAAIC,cAAc,GAAG;AACnBV,MAAAA,MAAM,EAAEvC,QAAQ,CAAC4B,GADE;AAEnB/B,MAAAA,MAAM,EAAEA,MAFW;AAGnBiD,MAAAA,QAAQ,EAAE5C;AAHS,KAArB;AAKAc,IAAAA,OAAO,CAACC,GAAR,CAAYgC,cAAZ;AAEAvE,IAAAA,WAAW,CAACsE,cAAZ,CAA2BC,cAA3B,EACCN,IADD,CACOO,KAAD,IAAW;AACf3C,MAAAA,cAAc,CAAC,IAAD,CAAd;AACAS,MAAAA,OAAO,CAACC,GAAR,CAAYiC,KAAZ;AACA,KAJF,EAKCN,KAAK,IAAI;AACT,YAAMC,UAAU,GACXD,KAAK,CAACE,QAAN,IACDF,KAAK,CAACE,QAAN,CAAeZ,IADd,IAEDU,KAAK,CAACE,QAAN,CAAeZ,IAAf,CAAoBa,OAFpB,IAGAH,KAAK,CAACG,OAHN,IAIAH,KAAK,CAACtB,QAAN,EALJ;AAMIN,MAAAA,OAAO,CAACC,GAAR,CAAY4B,UAAZ;AACH,KAbF;AAgBD;;AAED,WAASM,wBAAT,GAAmC;AACjCC,IAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuB,IAAvB;AACD;;AAED,sBACI;AAAK,IAAA,KAAK,EAAE;AAACC,MAAAA,SAAS,EAAE;AAAZ,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA,oBAAC,MAAD;AAAQ,IAAA,QAAQ,EAAC,QAAjB;AAA0B,IAAA,KAAK,EAAE;AAACC,MAAAA,eAAe,EAAE;AAAlB,KAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACG,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,UAAD;AAAY,IAAA,IAAI,EAAC,OAAjB;AAAyB,IAAA,KAAK,EAAE;AAACC,MAAAA,WAAW,EAAE,MAAd;AAAsBC,MAAAA,YAAY,EAAE;AAApC,KAAhC;AAA4E,IAAA,KAAK,EAAC,SAAlF;AAA4F,kBAAW,MAAvG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,eAIE,oBAAC,UAAD;AAAY,IAAA,OAAO,EAAC,IAApB;AAAyB,IAAA,KAAK,EAAE,EAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAJF,CADH,CADA,eAWC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAXD,eAaK,oBAAC,IAAD;AACE,IAAA,SAAS,MADX;AAEE,IAAA,SAAS,EAAC,QAFZ;AAGE,IAAA,OAAO,EAAC,QAHV;AAIE,IAAA,UAAU,EAAC,QAJb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAME,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAmB,IAAA,EAAE,EAAE,CAAvB;AAA0B,IAAA,KAAK,EAAE;AAACC,MAAAA,KAAK,EAAE;AAAR,KAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAACC,MAAAA,SAAS,EAAE,iBAAZ;AAA+BC,MAAAA,YAAY,EAAE;AAA7C,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD;AAAO,IAAA,SAAS,EAAE,CAAlB;AAAqB,IAAA,KAAK,EAAE;AAACF,MAAAA,KAAK,EAAC;AAAP,KAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,KAAK,EAAE;AAACG,MAAAA,OAAO,EAAE,MAAV;AAAiBC,MAAAA,aAAa,EAAC,QAA/B;AAAyCC,MAAAA,UAAU,EAAC,YAApD;AAAkEC,MAAAA,UAAU,EAAE,MAA9E;AAAsFC,MAAAA,UAAU,EAAE,MAAlG;AAA0GC,MAAAA,aAAa,EAAE;AAAzH,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,UAAD;AAAY,IAAA,OAAO,EAAC,IAApB;AAAyB,IAAA,KAAK,EAAE;AAACC,MAAAA,UAAU,EAAC,mBAAZ;AAAiCV,MAAAA,YAAY,EAAC;AAA9C,KAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG1D,QAAQ,CAACqE,IADZ,CADF,eAIE,oBAAC,UAAD;AAAY,IAAA,OAAO,EAAC,WAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAiCrE,QAAQ,CAACsE,WAA1C,CAJF,CADF,CADF,CADF,CADN,CADF,EAgBE,CAAChE,WAAD,gBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEKE,SAAS,CAAC+D,GAAV,CAAc,CAACC,IAAD,EAAO9C,CAAP,kBACd;AAAK,IAAA,GAAG,EAAEA,CAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEA,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,KAAK,EAAE;AAACoC,MAAAA,OAAO,EAAE,MAAV;AACDC,MAAAA,aAAa,EAAC,QADb;AAEDC,MAAAA,UAAU,EAAC,YAFV;AAGDC,MAAAA,UAAU,EAAE,KAHX;AAIDC,MAAAA,UAAU,EAAE,MAJX;AAKDC,MAAAA,aAAa,EAAE;AALd,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAMI,oBAAC,UAAD;AAAY,IAAA,OAAO,EAAC,WAApB;AAAgC,IAAA,KAAK,EAAE;AAACF,MAAAA,UAAU,EAAE;AAAb,KAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA8DvC,CAAC,GAAC,CAAhE,QAAqE8C,IAAI,CAACC,YAA1E,CANJ,EAQKD,IAAI,CAACE,aAAL,KAAsB,EAAtB,gBACG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,GAAG,EAAEF,IAAI,CAACE,aAAf;AAA8B,IAAA,KAAK,EAAC,KAApC;AAA0C,IAAA,MAAM,EAAC,MAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAC4D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAD5D,eACqE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADrE,CADH,GAIE,EAZP,eAcM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEA,oBAAC,UAAD;AAAY,kBAAW,MAAvB;AAA8B,IAAA,IAAI,EAAC,MAAnC;AAA0C,IAAA,KAAK,EAAEhE,KAAjD;AAAwD,IAAA,QAAQ,EAAGiE,CAAD,IAAK;AAACnD,MAAAA,iBAAiB,CAACmD,CAAC,CAACC,MAAF,CAASlE,KAAV,EAAiBgB,CAAjB,CAAjB;AAAqC,KAA7G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEG8C,IAAI,CAAC1C,OAAL,CAAayC,GAAb,CAAiB,CAACM,EAAD,EAAKpD,CAAL,kBAChB;AAAK,IAAA,GAAG,EAAEA,CAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,KAAK,EAAE;AAACqC,MAAAA,OAAO,EAAE,MAAV;AAAkBG,MAAAA,UAAU,EAAE;AAA9B,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACG,oBAAC,gBAAD;AAAmB,IAAA,KAAK,EAAExC,CAA1B;AAA6B,IAAA,OAAO,eAAE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAtC;AAAiD,IAAA,KAAK,EAAEoD,EAAE,CAACC,UAA3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADH,CADF,eAOE;AAAK,IAAA,KAAK,EAAE;AAAChB,MAAAA,OAAO,EAAE,MAAV;AAAkBG,MAAAA,UAAU,EAAE;AAA9B,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKY,EAAE,CAACE,WAAH,KAAkB,EAAlB,gBACC;AAAK,IAAA,GAAG,EAAEF,EAAE,CAACE,WAAb;AAA0B,IAAA,KAAK,EAAC,KAAhC;AAAsC,IAAA,MAAM,EAAC,MAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,GAEE,EAHP,eAIE,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJF,CAPF,CADD,CAFH,CAFA,CAdN,CADF,CADF,CAFA,CADA,CAFL,CADA,eAmDG,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADE,eAEF;AAAK,IAAA,KAAK,EAAE;AAACjB,MAAAA,OAAO,EAAE;AAAV,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAC,WAAhB;AAA4B,IAAA,KAAK,EAAC,SAAlC;AAA4C,IAAA,OAAO,EAAEd,cAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,CAFE,eAOF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPE,eASF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IATE,CAnDH,CADD,gBAmEC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,UAAD;AAAY,IAAA,OAAO,EAAC,OAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAEE,oBAAC,UAAD;AAAY,IAAA,OAAO,EAAC,OAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAFF,eAKE,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAEG,wBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BALF,CAnFH,CANF,CAbL,CADD,CADJ;AA8HH;;AAED,eAAezD,QAAf;;AAEA,MAAMsF,uBAAuB,GAAGrF,KAAK,IAAI;AACvC,QAAM;AAAEsF,IAAAA,WAAF;AAAe,OAAGC;AAAlB,MAAiCvF,KAAvC;AACA,sBACE,oBAAC,gBAAD;AACE,IAAA,OAAO,eAAE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADX;AAEE,IAAA,KAAK,EAAE,WAAWA,KAAK,CAACe,KAAjB,GAAyBf,KAAK,CAACwF;AAFxC,KAGMD,UAHN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KADF;AAOD,CATD","sourcesContent":["import React from 'react'\n\nimport {Grid} from '@material-ui/core';\n\nimport { Paper, Typography } from '@material-ui/core';\n\nimport formService from '../../services/formService';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Radio from '@material-ui/core/Radio';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport Divider from '@material-ui/core/Divider';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\n\nimport auth from '../../services/authService';\n\nconst useStyles = makeStyles((theme) => ({\n \n}));\n\n\n\nfunction UserView(props) {\n  const classes = useStyles();\n\n    const [userId, setUserId] = React.useState(\"\")\n    const [formData, setFormData] = React.useState({});\n    const [responseData, setResponseData] = React.useState([])\n    //console.log(responseData);\n    \n    const [optionValue, setOptionValue] = React.useState([])\n    const [isSubmitted, setIsSubmitted] = React.useState(false)\n    \n    \n    const [questions, setQuestions] = React.useState([]);\n    const [value, setValue] = React.useState('');\n    //console.log(value);\n    React.useEffect(()=>{\n      if(auth.isAuthenticated()){\n        var userr = auth.getCurrentUser();\n        console.log(userr.id);\n        setUserId(userr.id);  \n      } else{\n        var anonymousUserId = \"anonymous\" +  Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);\n        console.log(anonymousUserId);\n        setUserId(anonymousUserId)\n      }\n    }, [])\n    \n    \n\n    const handleRadioChange = (j, i) => {\n      var questionId = questions[i]._id\n      var optionId = questions[i].options[j]._id\n\n      var fakeData = {\n        question: i,\n        option: j\n      }\n      var data = {\n        questionId, optionId\n      }\n    //  console.log(data);\n      //console.log(fakeData);\n     // console.log(j);\n      \n      setValue(j)\n\n      var fakeRData = [...responseData];\n      \n      var indexOfResponse = fakeRData.findIndex(x => x.questionId===questionId);\n        if(indexOfResponse === -1){\n        setResponseData(responseData=> [...responseData, data])\n\n        } else{\n          fakeRData[indexOfResponse].questionId = questionId\n          setResponseData(fakeRData);\n        }\n\n      \n     // setOptionValue(fakeData);\n    //  \n    };\n\n    React.useEffect(() => {\n        var formId = props.match.params.formId\n        console.log(formId);\n\n        formService.getForm(formId)\n        .then((data) => { \n            console.log(data);\n            \n            setFormData(data)      \n            setQuestions(data.questions) \n           },\n           error => {\n           const resMessage =\n               (error.response &&\n               error.response.data &&\n               error.response.data.message) ||\n               error.message ||\n               error.toString();\n               console.log(resMessage);\n           }\n       );\n        \n    },[props.match.params.formId]);\n\n    function submitResponse(){\n      var submissionData = {\n        formId: formData._id,\n        userId: userId,\n        response: responseData\n      }\n      console.log(submissionData);\n      \n      formService.submitResponse(submissionData)\n      .then((data2) => { \n        setIsSubmitted(true)\n        console.log(data2);\n       },\n       error => {\n       const resMessage =\n           (error.response &&\n           error.response.data &&\n           error.response.data.message) ||\n           error.message ||\n           error.toString();\n           console.log(resMessage);\n       }\n   );\n      \n    }\n\n    function reloadForAnotherResponse(){\n      window.location.reload(true);\n    }\n\n    return (\n        <div style={{minHeight: '100vh'}}>\n         <div>\n         <AppBar position=\"static\" style={{backgroundColor: 'teal'}}>\n            <Toolbar>\n              <IconButton edge=\"start\" style={{marginRight: '10px', marginBottom: '5px'}} color=\"inherit\" aria-label=\"menu\">\n                <MenuIcon />\n              </IconButton>\n              <Typography variant=\"h6\" style={{}}>\n                Velocity Forms\n              </Typography>\n            </Toolbar>\n          </AppBar>\n          <br></br>\n\n              <Grid\n                container\n                direction=\"column\"\n                justify=\"center\"\n                alignItems=\"center\"\n              >\n                <Grid item xs={12} sm={5} style={{width: '100%'}}>         \n                  <Grid style={{borderTop: '10px solid teal', borderRadius: 10}}>\n                        <div>\n                          <div>\n                            <Paper elevation={2} style={{width:'100%'}}>\n                              <div style={{display: 'flex',flexDirection:'column', alignItems:'flex-start', marginLeft: '15px', paddingTop: '20px', paddingBottom: '20px'}}>\n                                <Typography variant=\"h4\" style={{fontFamily:'sans-serif Roboto', marginBottom:\"15px\"}}>\n                                  {formData.name}\n                                </Typography>\n                                <Typography variant=\"subtitle1\">{formData.description}</Typography>\n                              </div>\n                            </Paper>\n                          </div> \n                      </div>       \n                  </Grid>  \n\n                 {!isSubmitted ? (\n                   <div>\n                   <Grid>\n                      \n                      { questions.map((ques, i)=>(\n                        <div key={i}>\n                          <br></br>\n                        <Paper>\n                          <div>\n                            <div style={{display: 'flex',\n                                       flexDirection:'column', \n                                       alignItems:'flex-start', \n                                       marginLeft: '6px', \n                                       paddingTop: '15px', \n                                       paddingBottom: '15px'}}>\n                                <Typography variant=\"subtitle1\" style={{marginLeft: '10px'}}>{i+1}. {ques.questionText}</Typography>\n                               \n                                {ques.questionImage !==\"\"?(\n                                    <div>\n                                      <img src={ques.questionImage} width=\"80%\" height=\"auto\" /><br></br><br></br>\n                                    </div>\n                                ): \"\" }\n                                \n                                  <div>\n    \n                                  <RadioGroup aria-label=\"quiz\" name=\"quiz\" value={value} onChange={(e)=>{handleRadioChange(e.target.value, i)}}>\n    \n                                    {ques.options.map((op, j)=>(\n                                      <div key={j}>\n                                        <div style={{display: 'flex', marginLeft: '7px'}}>\n                                           <FormControlLabel  value={j} control={<Radio />} label={op.optionText} />\n                  \n    \n                                        </div>\n    \n                                        <div style={{display: 'flex', marginLeft: '10px'}}>\n                                            {op.optionImage !==\"\"?(\n                                              <img src={op.optionImage} width=\"64%\" height=\"auto\" />\n                                            ): \"\" }\n                                          <Divider />\n                                        </div>\n                                      </div>\n                                      ))}  \n                                    </RadioGroup>\n    \n                                  </div>\n                            </div>\n                          </div>  \n                        </Paper>  \n                        </div>\n                      ))}\n                      </Grid>   \n                      <Grid>\n                    <br></br>\n                    <div style={{display: 'flex'}}>\n                      <Button variant=\"contained\" color=\"primary\" onClick={submitResponse}>\n                        Submit\n                      </Button>\n                    </div>\n                    <br></br>\n\n                    <br></br>\n\n                  </Grid>\n                   </div>\n                 ):\n                 (\n                   <div>\n                     <Typography variant=\"body1\">Form submitted</Typography>\n                     <Typography variant=\"body2\">Thanks for submiting form</Typography>\n                     \n\n                     <Button onClick={reloadForAnotherResponse}>Submit another response</Button>\n                   </div>\n                 )\n                }\n\n                  \n\n                 \n                </Grid>  \n\n               \n              </Grid>   \n\n               {/* //TODO: Add a footer here */}\n         </div>\n        </div>\n    )\n}\n\nexport default UserView;\n\nconst FormControlLabelWrapper = props => {\n  const { radioButton, ...labelProps } = props;\n  return (\n    <FormControlLabel\n      control={<Radio />}\n      label={\"Radio \" + props.value + props.jIndex}\n      {...labelProps}\n    />\n  );\n};\n"]},"metadata":{},"sourceType":"module"}